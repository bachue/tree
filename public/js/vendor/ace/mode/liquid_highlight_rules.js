define(function(require,exports,module){"use strict";var oop=require("../lib/oop");var TextHighlightRules=require("./text_highlight_rules").TextHighlightRules;var HtmlHighlightRules=require("./html_highlight_rules").HtmlHighlightRules;var LiquidHighlightRules=function(){HtmlHighlightRules.call(this);var functions="date|capitalize|downcase|upcase|first|last|join|sort|map|size|escape|"+"escape_once|strip_html|strip_newlines|newline_to_br|replace|replace_first|"+"truncate|truncatewords|prepend|append|minus|plus|times|divided_by|split";var keywords="capture|endcapture|case|endcase|when|comment|endcomment|"+"cycle|for|endfor|in|reversed|if|endif|else|elsif|include|endinclude|unless|endunless|"+"style|text|image|widget|plugin|marker|endmarker|tablerow|endtablerow";var builtinVariables="forloop|tablerowloop";var definitions="assign";var keywordMapper=this.createKeywordMapper({"variable.language":builtinVariables,keyword:keywords,"support.function":functions,"keyword.definition":definitions},"identifier");for(var rule in this.$rules){this.$rules[rule].unshift({token:"variable",regex:"{%",push:"liquid-start"},{token:"variable",regex:"{{",push:"liquid-start"})}this.addRules({"liquid-start":[{token:"variable",regex:"}}",next:"pop"},{token:"variable",regex:"%}",next:"pop"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:keywordMapper,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"/|\\*|\\-|\\+|=|!=|\\?\\:"},{token:"paren.lparen",regex:/[\[\({]/},{token:"paren.rparen",regex:/[\])}]/},{token:"text",regex:"\\s+"}]});this.normalizeRules()};oop.inherits(LiquidHighlightRules,TextHighlightRules);exports.LiquidHighlightRules=LiquidHighlightRules});