define(function(require,exports,module){"use strict";var oop=require("../lib/oop");var TextMode=require("./text").Mode;var Tokenizer=require("../tokenizer").Tokenizer;var CssHighlightRules=require("./css_highlight_rules").CssHighlightRules;var MatchingBraceOutdent=require("./matching_brace_outdent").MatchingBraceOutdent;var WorkerClient=require("../worker/worker_client").WorkerClient;var CssBehaviour=require("./behaviour/css").CssBehaviour;var CStyleFoldMode=require("./folding/cstyle").FoldMode;var Mode=function(){this.HighlightRules=CssHighlightRules;this.$outdent=new MatchingBraceOutdent;this.$behaviour=new CssBehaviour;this.foldingRules=new CStyleFoldMode};oop.inherits(Mode,TextMode);(function(){this.foldingRules="cStyle";this.blockComment={start:"/*",end:"*/"};this.getNextLineIndent=function(state,line,tab){var indent=this.$getIndent(line);var tokens=this.getTokenizer().getLineTokens(line,state).tokens;if(tokens.length&&tokens[tokens.length-1].type=="comment"){return indent}var match=line.match(/^.*\{\s*$/);if(match){indent+=tab}return indent};this.checkOutdent=function(state,line,input){return this.$outdent.checkOutdent(line,input)};this.autoOutdent=function(state,doc,row){this.$outdent.autoOutdent(doc,row)};this.createWorker=function(session){var worker=new WorkerClient(["ace"],"ace/mode/css_worker","Worker");worker.attachToDocument(session.getDocument());worker.on("csslint",function(e){session.setAnnotations(e.data)});worker.on("terminate",function(){session.clearAnnotations()});return worker};this.$id="ace/mode/css"}).call(Mode.prototype);exports.Mode=Mode});