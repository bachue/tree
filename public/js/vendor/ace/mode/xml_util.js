define(function(require,exports,module){"use strict";function string(state){return[{token:"string",regex:'"',next:state+"_qqstring"},{token:"string",regex:"'",next:state+"_qstring"}]}function multiLineString(quote,state){return[{token:"string",regex:quote,next:state},{token:"constant.language.escape",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"},{defaultToken:"string"}]}exports.tag=function(states,name,nextState,tagMap){states[name]=[{token:"text",regex:"\\s+"},{token:!tagMap?"meta.tag.tag-name":function(value){if(tagMap[value])return"meta.tag.tag-name."+tagMap[value];else return"meta.tag.tag-name"},regex:"[-_a-zA-Z0-9:]+",next:name+"_embed_attribute_list"},{token:"empty",regex:"",next:name+"_embed_attribute_list"}];states[name+"_qstring"]=multiLineString("'",name+"_embed_attribute_list");states[name+"_qqstring"]=multiLineString('"',name+"_embed_attribute_list");states[name+"_embed_attribute_list"]=[{token:"meta.tag.r",regex:"/?>",next:nextState},{token:"keyword.operator",regex:"="},{token:"entity.other.attribute-name",regex:"[-_a-zA-Z0-9:]+"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"text",regex:"\\s+"}].concat(string(name))}});