<div class="modal fade" id="code-commit-dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title">Commit changes</h4>
      </div>
      <div class="modal-body">
        <form name="code_commit_form">
            <div data-ng-if="!code_commit_dialog.pushing">
                <div data-validation-state>
                  <input data-ng-model="code_commit_dialog.message" data-required type="text" class="form-control" placeholder="{{placeholder()}}" name="message"/>
                </div>
                <textarea class="form-control" name="description" data-ng-model="code_commit_dialog.description" rows="5" placeholder="Add an optional extended description ..."></textarea>
            </div>
            <div class="loading-bar progress progress-striped active" data-ng-if="show_loading_bar()">
                <div class="progress-bar widest" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"><span class="sr-only">Commit pushing...</span></div>
            </div>
            <div data-ng-include src="'/templates/diff.html'" data-ng-if="!code_commit_dialog.pushing && !!code_commit_dialog.diff" data-ng-init="diff = code_commit_dialog; notice_if_none = 'You haven\'t changed anything!'"></div>
            <!-- !!: looks like data-ng-if regard an empty array as false, but I need it to be true -->
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default btn-cancel" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" data-ng-click="do_commit()" data-ng-disabled="code_commit_dialog.pushing || code_commit_form.$invalid">Commit Changes</button>
      </div>
    </div>
  </div>
</div>
